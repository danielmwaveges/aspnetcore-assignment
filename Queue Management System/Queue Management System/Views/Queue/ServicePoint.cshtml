@model ServicePointView
@{
    ViewData["Title"] = "Service Point";
    var servicepoint = ViewData["servicepoint"] as ServicePoint;
    
}

<!DOCTYPE html>
    <html>
        
    <body>
        <div class="text-center m-2">
            <div>
                <h3>You are now in service point @servicepoint.ServicePointID offering @servicepoint.ServiceDescription services.</h3><br />
                <h4>@ViewData["callingMessage"]</h4><br/>
                @if (ViewData["callednumber"] is false)
                {
                    <input type="button" value="Get Next Number" class="btn btn-primary mt-3" onclick="location.href='@Url.Action("ServicePoint", "Queue", new{buttonname = "GetNextNo", serviceid = @servicepoint.ServicePointID})'" />
                }
               
                <input type="button" value="Recall Ticket No." class="btn btn-primary mt-3" onclick="location.href='@Url.Action("ServicePoint", "Queue", new{buttonname = "RecallTicketNo", serviceid = @servicepoint.ServicePointID})'" />
                
                @if ((ViewData["callednumber"] is true) && (ViewData["showedup"] is false))
                {
                    <input type="button" value="Mark as Showed" class="btn btn-primary mt-3" onclick="location.href='@Url.Action("ServicePoint", "Queue", new{buttonname = "MarkAsShowed", serviceid = @servicepoint.ServicePointID})'" />
                }
                
                @if ((ViewData["callednumber"] is true) && (ViewData["showedup"] is true) && (ViewData["finished"] is false))
                {
                    <input type="button" value="Mark as Finished" class="btn btn-primary mt-3" onclick="location.href='@Url.Action("ServicePoint", "Queue", new{buttonname = "MarkAsFinished", serviceid = @servicepoint.ServicePointID})'" />
                }
                
            </div>
            <div>
                <form method="post" asp-action="ServicePoint" >
                    <label for="service"><h4>Transfer to other Service Point</h4></label>
                        
                        <select name="service_id" id="service">
                            <option value="dontTransfer">"Dont Transfer"</option>
                            @foreach (var item in Model.ServicePoints)
                            {
                                <option value=@item.ServicePointID>@item.ServiceDescription</option>
                            }
                        </select>
                    
                    <input type="submit" value="Complete Service" class="btn btn-primary mt-3" formaction="@Url.Action("ServicePoint")"/>
                </form>
            </div>
            <div>
                <h4>Customers in Queue</h4>
                <h5>
                    <ul>
                    @foreach (var customer in (dynamic)ViewData["queue"])
                    {
                        @if(customer.Value == servicepoint.ServicePointID)
                        {
                            <li>@customer</li>
                        }
                    }
                    </ul>
                </h5>
                
            </div>
            
        </div>
    </body> 
</html>
